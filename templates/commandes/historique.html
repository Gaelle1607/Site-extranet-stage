{% extends 'base.html' %}

{% block title %}Mes commandes - Extranet B2B{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="bi bi-clock-history"></i> Mes commandes</h2>

{% if commandes %}
<div class="table-responsive">
    <table class="table table-hover">
        <thead class="table-light">
            <tr>
                <th>Numéro</th>
                <th>Date</th>
                <th>Articles</th>
                <th>Total TTC</th>
                <th>Statut</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for commande in commandes %}
            <tr>
                <td><strong>{{ commande.numero }}</strong></td>
                <td>{{ commande.date_commande|date:"d/m/Y" }}</td>
                <td>{{ commande.nombre_articles }} article{{ commande.nombre_articles|pluralize }}</td>
                <td>{{ commande.total_ttc|floatformat:2 }} €</td>
                <td>
                    {% if commande.statut == 'en_attente' %}
                    <span class="badge bg-warning">{{ commande.get_statut_display }}</span>
                    {% elif commande.statut == 'confirmee' %}
                    <span class="badge bg-info">{{ commande.get_statut_display }}</span>
                    {% elif commande.statut == 'en_preparation' %}
                    <span class="badge bg-primary">{{ commande.get_statut_display }}</span>
                    {% elif commande.statut == 'expediee' %}
                    <span class="badge bg-info">{{ commande.get_statut_display }}</span>
                    {% elif commande.statut == 'livree' %}
                    <span class="badge bg-success">{{ commande.get_statut_display }}</span>
                    {% elif commande.statut == 'annulee' %}
                    <span class="badge bg-danger">{{ commande.get_statut_display }}</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'commandes:detail' commande.numero %}" class="btn btn-outline-primary btn-sm">
                        <i class="bi bi-eye"></i> Détail
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% else %}
<div class="text-center py-5">
    <i class="bi bi-inbox display-1 text-muted"></i>
    <h4 class="mt-3">Aucune commande</h4>
    <p class="text-muted">Vous n'avez pas encore passé de commande</p>
    <a href="{% url 'catalogue:liste' %}" class="btn btn-primary">
        <i class="bi bi-grid"></i> Voir le catalogue
    </a>
</div>
{% endif %}
{% endblock %}
